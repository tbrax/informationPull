<title>Hello!</title>


<script type=text/javascript>
    $SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
  </script>

<script type=text/javascript src="{{
    url_for('static', filename='jquery.js') }}">
</script>

<script type=text/javascript>

function seperateTextBySentences(text)
{
    var result = text.match( /[^\.!\?]+[\.!\?]+/g );
    return result
}




function showStructure(data)
{

}

function getStructure(sentence)
{

    $.getJSON($SCRIPT_ROOT + '/ajaxAnalyzeRegex',
                {async: false,
                valSentenceToAnalyze: sentence
                },
                function(data) 
                {
                    splitSentence(data);
                });

}

function displaySentence(sentence)
{
    
}

function splitSentence(sentence)
{
    var sen = document.getElementById("selectedSentence");
    var words = sentence.split(" ");
    for (var i in words) 
    {
        var btn = document.createElement("button");
        btn.innerHTML = words[i];
        sen.appendChild(btn);
    }
}

function selectSentence(sentence)
{
    getStructure(sentence);
    //displaySentence(sentence);
    //document.getElementById("selectedSentence").textContent = sentence; 
    //console.log(sentence);
}

function displayDocument(result)
{
    //console.log(result);
    //var list = document.createElement("ul");
    strs = seperateTextBySentences(result)
    var list = document.getElementById("listAnchor");
    for (var i in strs) 
    {
        var anchor = document.createElement("a");
        anchor.href = "#";
        anchor.innerText = strs[i];
        anchor.id = "articleSentence" + i
        anchor.onclick = function () 
        {
            var thisName = this.id;
            var res = thisName.split("articleSentence")[1];
            var resNum = parseInt(res);
            selectSentence(strs[resNum]);
        };

        var elem = document.createElement("li");
        elem.appendChild(anchor);
        list.appendChild(elem);
    }
}
    $(function() 
    {
      $('a#calculate').bind('click', function() 
      {
        $.getJSON($SCRIPT_ROOT + '/ajaxGetArticle', 
        {
          valArticle: $('input[name="article"]').val()
        }, function(data) 
        {
          //$("#resultArticle").text(data.result);
          displayDocument(data.result);
        });
        
        return false;
      });

      $('a#calcAnalyzeRegex').bind('click', function() 
      {
        $.getJSON($SCRIPT_ROOT + '/ajaxAnalyzeRegex', 
        {
          valSentenceToAnalyze: $('textArea[name="analyzeRegex"]').val()
        }, function(data) 
        {
          $("#resultAnalyzeRegex").text(data.result);
        });
        return false;
      });
    });
  </script>
    <p>
        <input type=text size=10 name=article>
        <a href=# id=calculate>Get Article</a>
    </p>
    
    <p>
        <textarea size=25 name=analyzeRegex cols="30" rows="5"></textarea>
        <a href=# id=calcAnalyzeRegex>Analyze Regex</a>
    </p>
    <span id="selectedSentence"> </span>
    <p>

    </p>
    <p>
        <span id=resultAnalyzeRegex></span>
    </p>
    <p>
        <ul id=listAnchor></ul>
    </p>
    <p>
        <p id=resultArticle></p>
    </p>
    

<script>

    window.onload = (event) => 
    {   
    };


    function clickCookie0()
    {
        //setCookie("PageCookie0", document.getElementById("inputBox0").value,"100" );
    }


</script>

